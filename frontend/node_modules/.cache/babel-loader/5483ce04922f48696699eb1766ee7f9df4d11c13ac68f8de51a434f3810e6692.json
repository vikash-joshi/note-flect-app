{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{fetchallUsers,fetchEmailLogs}from\"./Manage/admin_methods\";import _authContext from\"../../context/authContext\";import{useNavigate}from\"react-router-dom\";//import \"./admin.css\";\nimport TableSkeletonLoader from\"./Manage/table.skeleton\";import TableUsers from\"./usertable\";import CreateUsers from\"./createusers\";import SendMail from\"./Manage/sendMail\";import EmailLogs from\"./emaillog\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Users(){const navigate=useNavigate();const[User,SetUser]=useState({});const{isAuthenticated,logout}=useContext(_authContext);const[UserList,SetUserLists]=useState([]);const[EmailList,SetEmailList]=useState([]);const[Loading,SetLoading]=useState(true);const[Action,SetAction]=useState('grid');const[Grid_Form,setGridOrForm]=useState(true);const Hanlde_View_User_EmailLog=()=>{SetAction(Action=='mail'?'grid':'mail');};const HanldeState=async(value,action)=>{SetAction(action);if(action=='delete'){alert('delete');}if(action=='delete'){alert('delete');}else{setGridOrForm(!Grid_Form);if(!Grid_Form){SetUser({name:\"\",email:\"\",IsAccountLocked:false,IsEmailVerified:false,UserType:'',gender:'',_id:\"\"});if(value){let res=await _fetchData();}}}};const _fetchData=async()=>{SetLoading(true);let Res=undefined;if(isAuthenticated){if(Action=='mail'){Res=await fetchEmailLogs();}else{Res=await fetchallUsers();}if(Res&&Res.message==undefined){setTimeout(()=>{SetLoading(false);},10000);if(Action=='mail'){SetEmailList(Res);}else{SetUserLists(Res);}}else{logout();navigate(\"/Login\");// Handle the case where there's no message or an empty message\n}}else{logout();navigate(\"/Login\");}};const handleChildEvent=(value,action)=>{//setMessage(value);\n//SetUser(value)\nSetUser({name:value===null||value===void 0?void 0:value.name,email:value===null||value===void 0?void 0:value.email,IsAccountLocked:value===null||value===void 0?void 0:value.IsAccountLocked,IsEmailVerified:value===null||value===void 0?void 0:value.IsEmailVerified,UserType:value===null||value===void 0?void 0:value.UserType,gender:value===null||value===void 0?void 0:value.gender,_id:value===null||value===void 0?void 0:value._id});HanldeState(User,action);};useEffect(()=>{const fetchData=async()=>{if(isAuthenticated){let Res=await fetchallUsers();console.log(Res);if(Res&&Res.message==undefined){setTimeout(()=>{SetLoading(false);},1000);SetUserLists(Res);}else{logout();navigate(\"/Login\");// Handle the case where there's no message or an empty message\n}}else{logout();navigate(\"/Login\");}};fetchData();return()=>{// Code to run on component unmount (cleanup)\n};},[isAuthenticated,logout,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-7\",style:{fontWeight:'bold',fontSize:'20px'},children:[Grid_Form?Action=='mail'?'User Email Log':'User Management':'Add User',\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5 d-flex justify-content-end\",children:[Grid_Form&&/*#__PURE__*/_jsxs(\"button\",{style:{marginLeft:'10px'},type:\"button\",onClick:_fetchData,disabled:Loading,className:\" ml-10 btn btn-outline-warning justify-content-center align-items-center d-flex\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined\",children:\"sync\"}),\" Refresh\"]}),Grid_Form&&Action==='mail'||Grid_Form&&Action!=='mail'&&/*#__PURE__*/_jsxs(\"button\",{style:{marginLeft:'10px'},type:\"button\",disabled:Loading,onClick:Hanlde_View_User_EmailLog,className:\" ml-10 btn btn-primary justify-content-center align-items-center d-flex\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined\",children:Grid_Form?'list_alt':'arrow_back'}),Grid_Form&&Action=='mail'?'View Users':Grid_Form&&Action!=='mail'?'View Logs':'Back']}),/*#__PURE__*/_jsxs(\"button\",{style:{marginLeft:'10px'},type:\"button\",disabled:Loading,onClick:HanldeState,className:\" ml-10 btn btn-primary justify-content-center align-items-center d-flex\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined\",children:Grid_Form?'person_add':'arrow_back'}),Grid_Form?'Add':'Back']})]})]}),Loading&&/*#__PURE__*/_jsx(TableSkeletonLoader,{}),Loading==false&&/*#__PURE__*/_jsx(_Fragment,{children:Grid_Form?Action=='mail'?/*#__PURE__*/_jsx(EmailLogs,{EmailList:EmailList}):/*#__PURE__*/_jsx(TableUsers,{UserList:UserList,onEvent:handleChildEvent}):Action!=='mail'?/*#__PURE__*/_jsx(CreateUsers,{User:User,onEvent:HanldeState}):/*#__PURE__*/_jsx(SendMail,{User:User,onEvent:HanldeState})})]});}","map":{"version":3,"names":["React","useContext","useEffect","useState","fetchallUsers","fetchEmailLogs","_authContext","useNavigate","TableSkeletonLoader","TableUsers","CreateUsers","SendMail","EmailLogs","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Users","navigate","User","SetUser","isAuthenticated","logout","UserList","SetUserLists","EmailList","SetEmailList","Loading","SetLoading","Action","SetAction","Grid_Form","setGridOrForm","Hanlde_View_User_EmailLog","HanldeState","value","action","alert","name","email","IsAccountLocked","IsEmailVerified","UserType","gender","_id","res","_fetchData","Res","undefined","message","setTimeout","handleChildEvent","fetchData","console","log","children","className","style","fontWeight","fontSize","marginLeft","type","onClick","disabled","class","onEvent"],"sources":["/Users/vikashjoshi/noteflect-app/note-flect-app/frontend/src/components/admin/users.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { fetchallUsers, fetchEmailLogs } from \"./Manage/admin_methods\";\nimport _authContext from \"../../context/authContext\";\nimport { useNavigate } from \"react-router-dom\";\n//import \"./admin.css\";\nimport TableSkeletonLoader from \"./Manage/table.skeleton\";\nimport TableUsers from \"./usertable\";\nimport CreateUsers from \"./createusers\";\nimport SendMail from \"./Manage/sendMail\";\nimport EmailLogs from \"./emaillog\";\n\nexport default function Users() {\n  const navigate = useNavigate();\n  const [User,SetUser]=useState({})\n  const { isAuthenticated, logout } = useContext(_authContext);\n  const [UserList, SetUserLists] = useState([]);\n  const [EmailList, SetEmailList] = useState([]); \n  \n  const [Loading, SetLoading] = useState(true);\n  const [Action,SetAction]=useState('grid')\n  const [Grid_Form,setGridOrForm]=useState(true);\n  const Hanlde_View_User_EmailLog=()=>{\n    SetAction(Action == 'mail' ? 'grid':'mail');\n  }\n  const HanldeState = async(value,action) => {\n    SetAction(action)\n    if(action == 'delete')\n    {\n      alert('delete')\n      \n    }\n    if(action == 'delete')\n      {\n        alert('delete')\n  \n      }\n    else{\n\n    setGridOrForm(!Grid_Form);\n    if(!Grid_Form){\n    SetUser({ name: \"\",\n      email: \"\",\n      IsAccountLocked: false,\n      IsEmailVerified: false,\n      UserType:'',\n      gender:'',\n      _id: \"\"\n  })\n  if(value)\n  {\n    let res=await _fetchData();\n  }\n}\n    }\n  };\n\n  const _fetchData = async () => {\n    SetLoading(true);\n    let Res=undefined;\n    if (isAuthenticated) {\n      if(Action == 'mail')\n      {\n        Res = await fetchEmailLogs();\n      }\n      else{\n       Res = await fetchallUsers();\n      }\n      if (Res && Res.message == undefined) {\n        setTimeout(() => {\n          SetLoading(false);\n        }, 10000);\n        if(Action == 'mail')\n          {\nSetEmailList(Res);\n          }\n          else{\n          SetUserLists(Res);\n          }\n      } else {\n        logout();\n        navigate(\"/Login\"); // Handle the case where there's no message or an empty message\n      }\n    } else {\n      logout();\n      navigate(\"/Login\");\n    }\n  };\n\n  const handleChildEvent = (value,action) => {\n    //setMessage(value);\n    //SetUser(value)\n    SetUser({ name: value?.name,\n      email: value?.email,\n      IsAccountLocked: value?.IsAccountLocked,\n      IsEmailVerified: value?.IsEmailVerified,\n      UserType:value?.UserType,\n      gender:value?.gender,\n      _id: value?._id\n  })\n    HanldeState(User,action);\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      if (isAuthenticated) {\n        let Res = await fetchallUsers();\n        console.log(Res);\n        if (Res && Res.message == undefined) {\n          setTimeout(() => {\n            SetLoading(false);\n          }, 1000);\n         \n          SetUserLists(Res);\n         \n        } else {\n          logout();\n          navigate(\"/Login\"); // Handle the case where there's no message or an empty message\n        }\n      } else {\n        logout();\n        navigate(\"/Login\");\n      }\n    };\n    fetchData();\n    return () => {\n      // Code to run on component unmount (cleanup)\n    };\n  }, [isAuthenticated, logout, navigate]);\n\n  return (\n    <>\n\n       <div className=\"row\"> \n        <div className=\"col-md-7\" style={{    fontWeight:'bold',fontSize:'20px'}}>{Grid_Form ? Action == 'mail' ? 'User Email Log' : 'User Management':'Add User'} </div>\n        <div className=\"col-md-5 d-flex justify-content-end\">\n          {Grid_Form && <button style={{marginLeft:'10px'}}\n            type=\"button\"\n            onClick={_fetchData} disabled={Loading}\n            className=\" ml-10 btn btn-outline-warning justify-content-center align-items-center d-flex\"\n          >\n            <span class=\"material-symbols-outlined\">sync</span> Refresh\n          </button> }\n          {(Grid_Form && Action === 'mail' ) || (Grid_Form && Action !== 'mail') &&\n          <button style={{marginLeft:'10px'}}\n            type=\"button\" disabled={Loading}\n            onClick={Hanlde_View_User_EmailLog}\n            className=\" ml-10 btn btn-primary justify-content-center align-items-center d-flex\"\n          >\n            <span class=\"material-symbols-outlined\">{Grid_Form ? 'list_alt' :'arrow_back'}</span>{Grid_Form && Action == 'mail' ? 'View Users': Grid_Form && Action !== 'mail' ? 'View Logs' : 'Back'}\n          </button>\n          }\n          <button style={{marginLeft:'10px'}}\n            type=\"button\" disabled={Loading}\n            onClick={HanldeState}\n            className=\" ml-10 btn btn-primary justify-content-center align-items-center d-flex\"\n          >\n            <span class=\"material-symbols-outlined\">{Grid_Form ? 'person_add':'arrow_back'}</span>{Grid_Form ? 'Add':'Back'}\n          </button>\n        </div>\n      </div> \n      {Loading && <TableSkeletonLoader />}\n      {Loading == false  && (<>{ Grid_Form ? Action == 'mail' ? <EmailLogs EmailList={EmailList} /> :  <TableUsers UserList={UserList} onEvent={handleChildEvent} />:\n      Action !== 'mail' ?\n      <CreateUsers User={User} onEvent={HanldeState} /> : <SendMail User={User} onEvent={HanldeState} /> }</>)}\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}