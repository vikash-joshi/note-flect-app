{"ast":null,"code":"import React,{useEffect,useState,useContext}from\"react\";import{GetUserDetail}from\"../common/User_Detail\";import _authContext from\"../../context/authContext\";import{useNavigate}from\"react-router-dom\";import\"./profile.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){const[user,setuser]=useState({});const{logout,login}=useContext(_authContext);const navigate=useNavigate();useEffect(()=>{const fetchData=async()=>{var _Result;let Result=await FetchRequtes();if(Result&&!((_Result=Result)!==null&&_Result!==void 0&&_Result.message)){var _Result2;const json=Result;Result=await Fetchuser(json[\"id\"]);console.clear();console.log(Result);if((_Result2=Result)!==null&&_Result2!==void 0&&_Result2.message){logout();navigate(\"/Login\");}else{const res=Result;setuser(res);login(res);}}else{logout();navigate(\"/Login\");}};fetchData();// Cleanup function if needed\nreturn()=>{// Code to run on component unmount (cleanup)\n};},[]);const FetchRequtes=async()=>{try{debugger;const response=await fetch(\"http://localhost:3001/api/auth/verifytoken\",{method:\"GET\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}});if(response.status==\"400\"){throw new Error(\"Response status: \".concat(response.status));}const json=await response.json();login();return json;}catch(error){console.error(error.message);}};const Fetchuser=async Id=>{try{debugger;const response=await fetch(\"http://localhost:3001/api/users/getuser/\"+Id,{method:\"GET\",credentials:\"include\",headers:{\"Content-Type\":\"application/json\"}});if(response.status==\"400\"){throw new Error(\"Response status: \".concat(response.status));}const json=await response.json();return json[0];}catch(error){console.error(error.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 leftpanel\",style:{boxShadow:'0 0 20px rgba(0, 0, 0, 0.1)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"imagecontainer\",children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%'},src:\"https://cdni.iconscout.com/illustration/premium/thumb/edit-social-media-profile-5295893-4412910.png\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",style:{boxShadow:'0 0 20px rgba(0, 0, 0, 0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"registration-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pictures\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-center mt-2\",children:\"Edit Profile\"})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"label\",{className:\"disablelabel\",children:user.email})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"User Name\",value:user.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",\"aria-label\":\"Default select example\",value:user.gender=='Male'?1:user.gender=='Female'?2:3,children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\" Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Other's\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"textarea\",{class:\"form-control\",id:\"exampleFormControlTextarea1\",placeholder:\"User Bio\",rows:\"3\",value:user.UserBio})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Update Profile\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\"})]})});}","map":{"version":3,"names":["React","useEffect","useState","useContext","GetUserDetail","_authContext","useNavigate","jsx","_jsx","jsxs","_jsxs","Profile","user","setuser","logout","login","navigate","fetchData","_Result","Result","FetchRequtes","message","_Result2","json","Fetchuser","console","clear","log","res","response","fetch","method","credentials","headers","status","Error","concat","error","Id","className","children","style","boxShadow","width","src","email","type","placeholder","value","name","gender","class","id","rows","UserBio"],"sources":["/Users/vikashjoshi/noteflect-app/note-flect-app/frontend/src/components/Users/profile.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { GetUserDetail } from \"../common/User_Detail\";\nimport _authContext from \"../../context/authContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./profile.css\";\n\nexport default function Profile() {\n  const [user, setuser] = useState({});\n  const { logout, login } = useContext(_authContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchData = async () => {\n      let Result = await FetchRequtes();\n      if (Result && !Result?.message) {\n        const json = Result;\n        Result = await Fetchuser(json[\"id\"]);\n        console.clear();\n        console.log(Result);\n        if (Result?.message) {\n          logout();\n          navigate(\"/Login\");\n        } else {\n          const res = Result;\n          setuser(res);\n          login(res);\n        }\n      } else {\n        logout();\n        navigate(\"/Login\");\n      }\n    };\n\n    fetchData();\n\n    // Cleanup function if needed\n    return () => {\n      // Code to run on component unmount (cleanup)\n    };\n  }, []);\n  const FetchRequtes = async () => {\n    try {\n      debugger;\n      const response = await fetch(\n        \"http://localhost:3001/api/auth/verifytoken\",\n        {\n          method: \"GET\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      );\n\n      if (response.status == \"400\") {\n        throw new Error(`Response status: ${response.status}`);\n      }\n      const json = await response.json();\n      login();\n      return json;\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  const Fetchuser = async (Id) => {\n    try {\n      debugger;\n      const response = await fetch(\n        \"http://localhost:3001/api/users/getuser/\" + Id,\n        {\n          method: \"GET\",\n          credentials: \"include\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      );\n\n      if (response.status == \"400\") {\n        throw new Error(`Response status: ${response.status}`);\n      }\n      const json = await response.json();\n      return json[0];\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n  \n  return (\n    <div className=\"container mt-4\">\n        <div className=\"row mt-5\" >\n        <div className=\"col-md-2\"></div>\n         <div className=\"col-md-3 leftpanel\" style={{boxShadow:'0 0 20px rgba(0, 0, 0, 0.1)'}}>\n              <div className=\"imagecontainer\">\n                <img style={{width:'100%'}} src=\"https://cdni.iconscout.com/illustration/premium/thumb/edit-social-media-profile-5295893-4412910.png\" />\n              </div>\n             </div>\n            <div className=\"col-md-5\" style={{boxShadow:'0 0 20px rgba(0, 0, 0, 0.1)'}}><div className=\"registration-form\">\n      <div className=\"profile-pictures\">\n      <h3 className=\"text-center mt-2\">\n        Edit Profile\n      </h3>\n      </div>\n      <form>\n      <div className=\"form-group\">\n          <label className=\"disablelabel\">{user.email}</label>\n        </div>\n           <div className=\"form-group\">\n        <input type=\"text\" placeholder=\"User Name\" value={user.name} />\n                </div>\n     \n        <div className=\"form-group\">\n        <select\n                        className=\"form-select\"\n                        aria-label=\"Default select example\"\n                        value={user.gender == 'Male' ? 1 : user.gender == 'Female' ? 2:3 }>\n                        <option value=\"1\"> Male</option>\n                        <option value=\"2\">Female</option>\n                        <option value=\"3\">Other's</option>\n                      </select>\n        </div>\n       \n        <div className=\"form-group\">\n        <textarea class=\"form-control\" id=\"exampleFormControlTextarea1\" placeholder=\"User Bio\" rows=\"3\" value={user.UserBio}></textarea>\n        </div>\n        <button type=\"submit\" className=\"submit-btn\">Update Profile</button>\n      </form>\n    </div></div>\n            <div className=\"col-md-2\"></div>\n        </div>\n     \n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}